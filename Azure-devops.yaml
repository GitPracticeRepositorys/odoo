trigger:
  branches:
    exclude:
      - '*'

jobs:
  - job: BuildAndPushDockerImage
    displayName: 'Build and Push Docker Image'
    pool:
      vmImage: 'ubuntu-latest'

    variables:
      imageName: 'az-odoo' # Set the desired image name here
      imageTag: 'latest'  # Set the desired image tag here

    steps:
      - checkout: self

      - task: Docker@2
        displayName: 'Build and Push'
        inputs:
          containerRegistry: 'Docker-Hub-Connection'
          repository: 'shivakrishna99'
          command: 'buildAndPush'
          Dockerfile: '**/Dockerfile'
          buildContext: '.'
          tags: '$(imageName):$(imageTag)'
